{"ast":null,"code":"import { createSlice } from '@reduxjs/toolkit';\nconst initialState = {\n  tasks: [],\n  currentTask: null,\n  loading: false,\n  error: null\n};\nconst taskSlice = createSlice({\n  name: 'tasks',\n  initialState,\n  reducers: {\n    fetchTasksStart: state => {\n      state.loading = true;\n      state.error = null;\n    },\n    fetchTasksSuccess: (state, action) => {\n      state.loading = false;\n      state.tasks = action.payload;\n    },\n    fetchTasksFailure: (state, action) => {\n      state.loading = false;\n      state.error = action.payload;\n    },\n    setTasks: (state, action) => {\n      state.tasks = action.payload;\n    },\n    addTask: (state, action) => {\n      state.tasks.push(action.payload);\n    },\n    updateTask: (state, action) => {\n      const index = state.tasks.findIndex(t => t.id === action.payload.id);\n      if (index !== -1) {\n        state.tasks[index] = action.payload;\n      }\n    },\n    deleteTask: (state, action) => {\n      state.tasks = state.tasks.filter(t => t.id !== action.payload);\n    },\n    setLoading: (state, action) => {\n      state.loading = action.payload;\n    },\n    setError: (state, action) => {\n      state.error = action.payload;\n    },\n    setCurrentTask: (state, action) => {\n      state.currentTask = action.payload;\n    },\n    addComment: (state, action) => {\n      const task = state.tasks.find(t => t.id === action.payload.taskId);\n      if (task) {\n        if (!task.comments) {\n          task.comments = [];\n        }\n        task.comments.push(action.payload.comment);\n      }\n    },\n    updateProgress: (state, action) => {\n      const task = state.tasks.find(t => t.id === action.payload.taskId);\n      if (task) {\n        task.progress = action.payload.progress;\n        if (task.progress === 100) {\n          task.status = 'completed';\n        } else if (task.progress > 0) {\n          task.status = 'in-progress';\n        }\n      }\n    }\n  }\n});\nexport const {\n  fetchTasksStart,\n  fetchTasksSuccess,\n  fetchTasksFailure,\n  setTasks,\n  addTask,\n  updateTask,\n  deleteTask,\n  setLoading,\n  setError,\n  setCurrentTask,\n  addComment,\n  updateProgress\n} = taskSlice.actions;\nexport default taskSlice.reducer;","map":{"version":3,"names":["createSlice","initialState","tasks","currentTask","loading","error","taskSlice","name","reducers","fetchTasksStart","state","fetchTasksSuccess","action","payload","fetchTasksFailure","setTasks","addTask","push","updateTask","index","findIndex","t","id","deleteTask","filter","setLoading","setError","setCurrentTask","addComment","task","find","taskId","comments","comment","updateProgress","progress","status","actions","reducer"],"sources":["/Users/tancong/Code/department-platform/frontend/src/store/slices/taskSlice.ts"],"sourcesContent":["import { createSlice, PayloadAction } from '@reduxjs/toolkit';\n\ninterface Comment {\n  id: string;\n  user: {\n    id: string;\n    username: string;\n    email: string;\n  };\n  content: string;\n  timestamp: string;\n}\n\ninterface Task {\n  _id: string;\n  id: string;\n  title: string;\n  type: 'bug' | 'feature' | 'task';\n  status: 'completed' | 'in-progress' | 'pending';\n  startDate: string;\n  endDate: string;\n  progress?: number;\n  description?: string;\n  comments?: Comment[];\n}\n\ninterface TaskState {\n  tasks: Task[];\n  currentTask: Task | null;\n  loading: boolean;\n  error: string | null;\n}\n\nconst initialState: TaskState = {\n  tasks: [],\n  currentTask: null,\n  loading: false,\n  error: null,\n};\n\nconst taskSlice = createSlice({\n  name: 'tasks',\n  initialState,\n  reducers: {\n    fetchTasksStart: (state) => {\n      state.loading = true;\n      state.error = null;\n    },\n    fetchTasksSuccess: (state, action: PayloadAction<Task[]>) => {\n      state.loading = false;\n      state.tasks = action.payload;\n    },\n    fetchTasksFailure: (state, action: PayloadAction<string>) => {\n      state.loading = false;\n      state.error = action.payload;\n    },\n    setTasks: (state, action: PayloadAction<Task[]>) => {\n      state.tasks = action.payload;\n    },\n    addTask: (state, action: PayloadAction<Task>) => {\n      state.tasks.push(action.payload);\n    },\n    updateTask: (state, action: PayloadAction<Task>) => {\n      const index = state.tasks.findIndex(t => t.id === action.payload.id);\n      if (index !== -1) {\n        state.tasks[index] = action.payload;\n      }\n    },\n    deleteTask: (state, action: PayloadAction<string>) => {\n      state.tasks = state.tasks.filter(t => t.id !== action.payload);\n    },\n    setLoading: (state, action: PayloadAction<boolean>) => {\n      state.loading = action.payload;\n    },\n    setError: (state, action: PayloadAction<string | null>) => {\n      state.error = action.payload;\n    },\n    setCurrentTask: (state, action: PayloadAction<Task>) => {\n      state.currentTask = action.payload;\n    },\n    addComment: (state, action: PayloadAction<{ taskId: string; comment: Comment }>) => {\n      const task = state.tasks.find(t => t.id === action.payload.taskId);\n      if (task) {\n        if (!task.comments) {\n          task.comments = [];\n        }\n        task.comments.push(action.payload.comment);\n      }\n    },\n    updateProgress: (state, action: PayloadAction<{ taskId: string; progress: number }>) => {\n      const task = state.tasks.find(t => t.id === action.payload.taskId);\n      if (task) {\n        task.progress = action.payload.progress;\n        if (task.progress === 100) {\n          task.status = 'completed';\n        } else if (task.progress > 0) {\n          task.status = 'in-progress';\n        }\n      }\n    },\n  },\n});\n\nexport const {\n  fetchTasksStart,\n  fetchTasksSuccess,\n  fetchTasksFailure,\n  setTasks,\n  addTask,\n  updateTask,\n  deleteTask,\n  setLoading,\n  setError,\n  setCurrentTask,\n  addComment,\n  updateProgress,\n} = taskSlice.actions;\n\nexport default taskSlice.reducer; "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}